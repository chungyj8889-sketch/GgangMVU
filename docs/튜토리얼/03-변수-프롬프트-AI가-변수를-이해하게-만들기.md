# 변수 프롬프트: AI가 변수를 이해하게 만들기

지난 장에서 우리는 성공적으로 변수를 설정하고 초기화했습니다. 하지만 이것은 어디까지나 **실리태번 차원**에서 캐릭터 카드에 변수를 할당한 것일 뿐, 아직 AI에게 "이런 변수가 있다"고 알려주지는 않은 상태입니다. 비유하자면 이렇습니다. 캐릭터 카드에는 보통 프로필 이미지가 있죠? 하지만 우리가 AI에게 따로 말해주지 않으면, AI는 당신이 이 캐릭터에 어떤 사진을 걸어뒀는지 전혀 모르는 것과 같습니다.

그렇다면, 어떻게 해야 AI가 이 변수들을 "보고" 우리의 의도대로 조작하게 만들 수 있을까요? 바로 월드 인포(World Info)에 **프롬프트**를 작성해서, AI에게 변수에 대한 **3가지 핵심 정보**를 알려줘야 합니다.

## 변수의 3가지 핵심 정보

**변수 목록 (Variable List)**
* 현재 변수의 값은 얼마인가? 그리고 그 값은 어떤 의미인가?
* *예시:* `하쿠아.의존도`라는 변수의 현재 수치는? 0일 때와 100일 때 각각 무슨 뜻인가?

**변수 업데이트 규칙 (Variable Update Rules)**
* 변수는 어떤 상황에서 업데이트되어야 하며, 어떤 값으로 변해야 하는가?
* *예시:* `하쿠아.의존도`는 어떤 스토리 전개에서 상승해야 하고, 반대로 어떤 상황에서 하락해야 하는가?

**변수 출력 형식 (Variable Output Format)**
* AI는 변수를 업데이트하기 위해 **무엇을 출력**해야 하는가?
* *예시:* AI가 "하쿠아가 주인공과 데이트를 했으니 `하쿠아.의존도`를 20에서 25로 올려야겠다"고 판단했다면, MVU 스크립트가 이를 알아듣고 실제로 25로 고칠 수 있도록 **어떤 텍스트를 내뱉어야 하는가?**



!!! question "혹시 이해가 잘 안 되시나요? ㅠㅠ"
    저... 다른 비유를 하나 더 들어볼게요! 만약 우리가 **"스토리 진행에 따라 AI가 알아서 캐릭터 프사를 바꾸게"** 만들고 싶다면 어떻게 해야 할까요?

    * **변수 목록:** 현재 캐릭터의 프사는 무엇인가? (웃는 얼굴? 우는 얼굴?) 그게 무슨 의미인가?
    * **변수 업데이트 규칙:** 캐릭터 프사는 어떤 상황에서 바뀌어야 하는가? (슬픈 일엔 우는 얼굴로?)
    * **변수 출력 형식:** AI가 프사를 바꾸려면 무엇을 출력해야 하는가? (아마도 직접 이미지 파일을 출력하거나, 파일명을 말해야겠죠! 그러면 '프사 교체 스크립트'가 그걸 보고 사진을 바꿔줄 겁니다.)



## 세 가지 변수 프롬프트 간단하게 제작하기

여러분이 머리를 싸맬 필요 없이, 거의 **거저먹기 수준**으로 변수 목록, 업데이트 규칙, 출력 형식을 얻을 수 있는 방법이 있습니다.

### 1. `[mvu_update]` 변수 업데이트 규칙
이전에 '변수 구조 설계'를 생성할 때 썼던 채팅을 이어서 진행합니다. **[문지기 카드 작성 도우미 - 변수 업데이트 규칙(Variable Update Rules)]** 항목으로 전환한 뒤, 특별히 강조하고 싶은 규칙을 입력하고 AI에게 생성을 요청하세요. 그 후 생성된 결과를 입맛에 맞게 조금만 다듬으면 됩니다.
> *예시 입력:* "`하쿠아`의 `칭호`는 반드시 주인공에 대한 하쿠아의 태도를 반영해서 변해야 해."

### 2. `[mvu_update]` 변수 출력 형식 및 변수 목록
이건 더 쉽습니다. 그냥 도우미가 생성해 준 **`[mvu_update] 변수 출력 형식`**과 **`변수 목록`** 내용을 그대로 복사하세요.

이렇게 하면 우리는 **3대 변수 프롬프트**를 모두 손에 넣게 됩니다. 이제 아래 그림처럼 설정을 마치면, AI는 비로소 변수를 이해하고 스스로 업데이트할 수 있게 됩니다.

다음으로, **실리태번 우측 상단 블록 아이콘(Extensions)** ‣ **정규식(Regex)**으로 이동하여, 아래 버전 중 하나를 골라 3개의 정규식 스크립트를 **로컬 정규식(Local Regex)**으로 가져옵니다.

* **예쁘게 꾸민 버전** ([예시 보기](https://gitgud.io/StageDog/tavern_resource/-/raw/main/src/%E6%AD%A3%E5%88%99/%E5%8F%98%E9%87%8F%E6%9B%B4%E6%96%B0/%E7%BE%8E%E5%8C%96%E7%89%88.mp4)): <a href="../../assets/files/regex-remove-variable-update.json" download="regex-[不发送]去除变量更新.json">`[전송안함]변수 업데이트 제거`</a>, <a href="../../assets/files/regex-beautify-variable-updating.json" download="regex-[美化]变量更新中.json">`[미화]변수 업데이트 중`</a>, <a href="../../assets/files/regex-beautify-variable-complete.json" download="regex-[美化]完整变量更新.json">`[미화]변수 업데이트 완료`</a>
* **접기 버전** ([예시 보기](#)): `[전송안함]변수 업데이트 제거`, `[접기]변수 업데이트 중`, `[접기]변수 업데이트 완료`
* **알림 전용 버전** (내용 펼치기 불가): `[전송안함]변수 업데이트 제거`, `[알림]변수 업데이트 중`, `[알림]변수 업데이트 완료`

이렇게 하면 변수 프롬프트 작성이 끝났으니, 바로 다음 장으로 넘어가셔도 됩니다! 하지만 각 프롬프트가 도대체 **무슨 역할을 하고, 어떤 원리로 작동하는지** 한번 짚고 넘어가는 것을 강력 추천합니다.